# PostgreSQL Database (Production) - Using separate variables
spring.datasource.url=jdbc:postgresql://${PGHOST}:${PGPORT}/${PGDATABASE}
spring.datasource.username=${PGUSER}
spring.datasource.password=${PGPASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=create-drop
spring.jpa.show-sql=false
spring.sql.init.mode=always

# Spring AI Chat Memory
spring.ai.chat.memory.repository.jdbc.initialize-schema=always

# Email Configuration (for Gmail)
spring.mail.host=${GMAIL_HOST}
spring.mail.port=${GMAIL_PORT}
spring.mail.username=${GMAIL_USERNAME}
spring.mail.password=${GMAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=${GMAIL_SMTP_AUTH}
spring.mail.properties.mail.smtp.starttls.enable=${GMAIL_SMTP_STARTTLS_ENABLE}
spring.mail.from=${GMAIL_FROM}
spring.mail.cc=${GMAIL_CC}

# Security configurations
app.security.staff.users=${STAFF_USERS}

# Public request base URL (dynamic from Railway)
app.public-request-base-url=${RAILWAY_PUBLIC_DOMAIN:http://localhost:8080}/public/request/

# Rate Limiter Configuration
app.rate-limiter.public.max-requests-per-minute=10
app.rate-limiter.chat.max-requests-per-minute=5
app.rate-limiter.window-size-seconds=60

# Enhanced session configuration for Railway
server.servlet.session.timeout=60m
server.servlet.session.cookie.max-age=60m
server.servlet.session.cookie.same-site=lax
server.servlet.session.cookie.secure=true
server.servlet.session.cookie.http-only=true
server.servlet.session.persistent=true

# Logging for debugging error handling
logging.level.com.laptoprepair.exception.GlobalExceptionHandler=INFO
logging.level.com.laptoprepair.controller=DEBUG